# ============================================
# API Server Environment Variables
# ============================================
# Copy this file to .env and fill in your values
# Never commit .env to version control!

# ============================================
# Server Configuration
# ============================================
HOST=0.0.0.0
PORT=8000
NODE_ENV=development
# Options: development, production, test

# ============================================
# Supabase Configuration
# ============================================
# Get these from your Supabase project settings
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=your-service-role-key-here
SUPABASE_ANON_KEY=your-anon-key-here

# ============================================
# JWT Configuration
# ============================================
# Generate a strong random secret (e.g., openssl rand -base64 32)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRE_TIME=24h
# Examples: 15m, 1h, 24h, 7d

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of allowed origins
CORS_ORIGIN=http://localhost:3000,http://localhost:5173
# For production: https://yourdomain.com,https://www.yourdomain.com

# ============================================
# Frontend & API URLs
# ============================================
# Used for email verification redirects and callbacks
FRONTEND_URL=http://localhost:3000
API_URL=http://localhost:8000

# ============================================
# Cookie Configuration
# ============================================
# Optional: Set domain for subdomain scenarios (e.g., .example.com)
# Leave empty for same-origin cookies
COOKIE_DOMAIN=

# ============================================
# Admin Panel Configuration
# ============================================
# Secret key for admin routes (generate a strong random key)
ADMIN_SECRET_KEY=your-admin-secret-key-change-this

# ============================================
# File Upload Configuration
# ============================================
# Maximum file size in bytes (e.g., 50MB = 52428800)
MAX_FILE_SIZE=52428800
# Comma-separated list of allowed MIME types
ALLOWED_FILE_TYPES=video/mp4,video/webm,video/quicktime,image/jpeg,image/png

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=info
# Options: error, warn, info, verbose, debug, silly

# ============================================
# Kafka Configuration (Optional - if using Kafka)
# ============================================
# Comma-separated list of Kafka broker addresses
KAFKA_BROKERS=kafka1.example.com:9092,kafka2.example.com:9092
KAFKA_USERNAME=your-kafka-username
KAFKA_PASSWORD=your-kafka-password
KAFKA_PRODUCE_TOPIC=Transcribe
KAFKA_CONSUME_TOPIC=update_transcribe
KAFKA_COMPRESSION_TOPIC=finish_compress
KAFKA_SSL=true
# Options: plain, scram-sha-256, scram-sha-512
KAFKA_SASL_MECHANISM=scram-sha-256
KAFKA_CONNECTION_TIMEOUT=10000
KAFKA_REQUEST_TIMEOUT=30000

# ============================================
# Azure Service Bus Configuration
# ============================================
# Use either connection string OR namespace (for passwordless auth)
# Option 1: Connection String (recommended for most cases)
AZURE_SERVICE_BUS_CONNECTION_STRING=Endpoint=sb://your-namespace.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=your-key-here

# Option 2: Namespace (for passwordless authentication with Azure Managed Identity)
# AZURE_SERVICE_BUS_NAMESPACE=your-namespace

# Topic and Subscription for job results
AZURE_SERVICE_BUS_JOB_RESULTS_TOPIC=job-results
AZURE_SERVICE_BUS_JOB_RESULTS_SUBSCRIPTION=server-b-results

# Queues for job requests
AZURE_SERVICE_BUS_TRANSCRIPTION_JOBS_QUEUE=transcription-jobs
AZURE_SERVICE_BUS_VIDEO_COMPRESSION_JOBS_QUEUE=video-compression-jobs

# ============================================
# Email Configuration (Nodemailer)
# ============================================
# Enable/disable email service
EMAIL_ENABLED=false

# Email service (optional - use predefined service like 'Gmail', 'SendGrid', 'Outlook')
# If set, SMTP configuration below will be ignored for that service
# Options: Gmail, SendGrid, Outlook, Yahoo, etc.
EMAIL_SERVICE=

# SMTP Configuration (used if EMAIL_SERVICE is not set)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
# Set to true for port 465, false for other ports
EMAIL_SECURE=false

# Email sender information
EMAIL_FROM_NAME=API Server
EMAIL_FROM_ADDRESS=noreply@example.com

# Email authentication
# For Gmail: Use an App Password (not your regular password)
# For other services: Use your SMTP credentials
EMAIL_AUTH_USER=your-email@gmail.com
EMAIL_AUTH_PASSWORD=your-app-password-or-smtp-password

# TLS Configuration
EMAIL_TLS_REJECT_UNAUTHORIZED=true
# Set to false only for development/testing with self-signed certificates

# ============================================
# AI Server Configuration
# ============================================
# Base URL for the AI/ML service
AI_SERVER_URL=http://localhost:5000
# Request timeout in milliseconds
AI_SERVER_TIMEOUT=30000

# ============================================
# Example Configurations
# ============================================
# 
# Production Example:
# NODE_ENV=production
# PORT=8000
# HOST=0.0.0.0
# CORS_ORIGIN=https://yourdomain.com
# FRONTEND_URL=https://yourdomain.com
# API_URL=https://api.yourdomain.com
# LOG_LEVEL=warn
# EMAIL_ENABLED=true
# EMAIL_SERVICE=SendGrid
# EMAIL_FROM_ADDRESS=noreply@yourdomain.com
#
# Development Example:
# NODE_ENV=development
# PORT=8000
# CORS_ORIGIN=http://localhost:3000,http://localhost:5173
# FRONTEND_URL=http://localhost:3000
# API_URL=http://localhost:8000
# LOG_LEVEL=debug
# EMAIL_ENABLED=false
